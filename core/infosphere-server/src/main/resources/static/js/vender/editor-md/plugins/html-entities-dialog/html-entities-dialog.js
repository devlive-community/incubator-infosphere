/*!
 * HTML entities dialog plugin for Editor.md
 *
 * @file        html-entities-dialog.js
 * @author      pandao
 * @version     1.2.0
 * @updateTime  2015-03-08
 * {@link       https://github.com/pandao/editor.md}
 * @license     MIT
 */
(function(){var a=function(c){var f=jQuery;var e="html-entities-dialog";var d=[];var b=[];c.fn.htmlEntitiesDialog=function(){var k=this;var r=this.cm;var g=k.lang;var i=k.settings;var u=i.pluginPath+e+"/";var l=this.editor;var s=r.getCursor();var q=r.getSelection();var p=k.classPrefix;var h=p+"dialog-"+e,m;var j=g.dialog.htmlEntities;var o=['<div class="'+p+'html-entities-box" style="width: 760px;height: 334px;margin-bottom: 8px;overflow: hidden;overflow-y: auto;">','<div class="'+p+'grid-table">',"</div>","</div>"].join("\r\n");r.focus();if(l.find("."+h).length>0){m=l.find("."+h);d=[];m.find("a").removeClass("selected");this.dialogShowMask(m);this.dialogLockScreen();m.show()}else{m=this.createDialog({name:h,title:j.title,width:800,height:475,mask:i.dialogShowMask,drag:i.dialogDraggable,content:o,lockScreen:i.dialogLockScreen,maskStyle:{opacity:i.dialogMaskOpacity,backgroundColor:i.dialogMaskBgColor},buttons:{enter:[g.buttons.enter,function(){r.replaceSelection(d.join(" "));this.hide().lockScreen(false).hideMask();return false}],cancel:[g.buttons.cancel,function(){this.hide().lockScreen(false).hideMask();return false}]}})}var t=m.find("."+p+"grid-table");var n=function(){if(b.length<1){return}var w=20;var A=Math.ceil(b.length/w);t.html("");for(var B=0;B<A;B++){var C='<div class="'+p+'grid-table-row">';for(var v=0;v<w;v++){var y=b[(B*w)+v];if(typeof y!=="undefined"){var z=y.name.replace("&amp;","&");C+='<a href="javascript:;" value="'+y.name+'" title="'+z+'" class="'+p+'html-entity-btn">'+z+"</a>"}}C+="</div>";t.append(C)}m.find("."+p+"html-entity-btn").bind(c.mouseOrTouch("click","touchend"),function(){f(this).toggleClass("selected");if(f(this).hasClass("selected")){d.push(f(this).attr("value"))}})};if(b.length<1){if(typeof(m.loading)=="function"){m.loading(true)}f.getJSON(u+e.replace("-dialog","")+".json",function(v){if(typeof(m.loading)=="function"){m.loading(false)}b=v;n()})}else{n()}}};if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){module.exports=a}else{if(typeof define==="function"){if(define.amd){define(["editormd"],function(b){a(b)})}else{define(function(c){var b=c("./../../editormd");a(b)})}}else{a(window.editormd)}}})();