/*!
 * Reference link dialog plugin for Editor.md
 *
 * @file        reference-link-dialog.js
 * @author      pandao
 * @version     1.2.1
 * @updateTime  2015-06-09
 * {@link       https://github.com/pandao/editor.md}
 * @license     MIT
 */
(function(){var a=function(b){var c="reference-link-dialog";var d=1;b.fn.referenceLinkDialog=function(){var j=this;var o=this.cm;var e=this.lang;var k=this.editor;var h=this.settings;var p=o.getCursor();var n=o.getSelection();var i=e.dialog.referenceLink;var m=this.classPrefix;var g=m+c,l;o.focus();if(k.find("."+g).length<1){var f='<div class="'+m+'form"><label>'+i.name+'</label><input type="text" value="['+d+']" data-name /><br/><label>'+i.urlId+'</label><input type="text" data-url-id /><br/><label>'+i.url+'</label><input type="text" value="http://" data-url /><br/><label>'+i.urlTitle+'</label><input type="text" value="'+n+'" data-title /><br/></div>';l=this.createDialog({name:g,title:i.title,width:380,height:296,content:f,mask:h.dialogShowMask,drag:h.dialogDraggable,lockScreen:h.dialogLockScreen,maskStyle:{opacity:h.dialogMaskOpacity,backgroundColor:h.dialogMaskBgColor},buttons:{enter:[e.buttons.enter,function(){var r=this.find("[data-name]").val();var q=this.find("[data-url]").val();var s=this.find("[data-url-id]").val();var t=this.find("[data-title]").val();if(r===""){alert(i.nameEmpty);return false}if(s===""){alert(i.idEmpty);return false}if(q==="http://"||q===""){alert(i.urlEmpty);return false}o.replaceSelection("["+r+"]["+s+"]");if(n===""){o.setCursor(p.line,p.ch+1)}t=(t==="")?"":' "'+t+'"';o.setValue(o.getValue()+"\n["+s+"]: "+q+t+"");this.hide().lockScreen(false).hideMask();return false}],cancel:[e.buttons.cancel,function(){this.hide().lockScreen(false).hideMask();return false}]}})}l=k.find("."+g);l.find("[data-name]").val("["+d+"]");l.find("[data-url-id]").val("");l.find("[data-url]").val("http://");l.find("[data-title]").val(n);this.dialogShowMask(l);this.dialogLockScreen();l.show();d++}};if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){module.exports=a}else{if(typeof define==="function"){if(define.amd){define(["editormd"],function(b){a(b)})}else{define(function(c){var b=c("./../../editormd");a(b)})}}else{a(window.editormd)}}})();